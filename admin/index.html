<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="css/ui.css">
</head>
<body>

<!-- ========== SIDEBAR ========== -->
<div class="sidebar">
  <h2 class="logo">ADMIN</h2>
  <a class="active">Dashboard</a>
  <a href="users.html">Users</a>
  <a href="history.html">Historic</a>
  <a href="#" id="logoutBtn" style="margin-top:30px;color:#ef4444">Logout</a>
</div>

<!-- ========== MAIN ========== -->
<div class="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <h1>Dashboard</h1>
    <div class="user-chip">Admin</div>
  </div>

  <!-- STATS -->
  <div class="stats">
    <div class="stat-card">
      <span>Total Users</span>
      <h2 id="stat-total">0</h2>
    </div>

    <div class="stat-card">
      <span>Admins</span>
      <h2 id="stat-admin">0</h2>
    </div>

    <div class="stat-card">
      <span>Directeurs</span>
      <h2 id="stat-directeur">0</h2>
    </div>

    <div class="stat-card">
      <span>Supervisors</span>
      <h2 id="stat-supervisor">0</h2>
    </div>

    <div class="stat-card">
      <span>Team Leaders</span>
      <h2 id="stat-teamleader">0</h2>
    </div>

    <div class="stat-card">
      <span>Agents</span>
      <h2 id="stat-agent">0</h2>
    </div>
  </div>

  <!-- USERS TABLE -->
  <div class="card">
    <h2>All Users (Profiles)</h2>

    <table class="table">
      <thead>
        <tr>
          <th>User ID</th>
          <th>Role</th>
        </tr>
      </thead>

      <tbody id="dashboard-users-table"></tbody>
    </table>
  </div>

</div>

<!-- ========== LOGOUT ========== -->
<script type="module">
  import { supabase } from "./js/supabase-admin.js";

  document.getElementById("logoutBtn").onclick = async () => {
    await supabase.auth.signOut();
    location.href = "login.html";
  };
</script>

<!-- DASHBOARD LOGIC -->
<script type="module" src="js/dashboard.js"></script>

</body>
</html>
