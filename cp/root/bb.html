<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CP Root</title>

<style>
* { box-sizing: border-box; font-family: Arial, sans-serif; }
body { margin: 0; display: flex; background: #f1f5f9; }

/* Sidebar */
.sidebar {
  width: 230px;
  background: #1e293b;
  color: #fff;
  padding: 20px;
  height: 100vh;
}
.profile { text-align: center; margin-bottom: 30px; }
.profile img { width: 70px; border-radius: 50%; }

.sidebar button {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.add { background: #38bdf8; }
.logout { background: #ef4444; color: #fff; }

/* Main */
.main { flex: 1; padding: 25px; }

.top-tables {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.card {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border-bottom: 1px solid #e5e7eb;
  padding: 8px;
  font-size: 14px;
}

.actions button {
  margin-right: 5px;
  padding: 5px 8px;
  font-size: 12px;
}
.danger { background: #ef4444; color: #fff; }

/* Departments */
.departments {
  margin-top: 30px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}

/* Modal */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
}
.modal-content {
  background: #fff;
  width: 420px;
  padding: 20px;
  border-radius: 10px;
}
.modal-content input,
.modal-content select {
  width: 100%;
  margin-bottom: 10px;
  padding: 8px;
}
.parts label {
  display: block;
  font-size: 14px;
}
</style>
</head>

<body>

<!-- Sidebar -->
<aside class="sidebar">
  <div class="profile">
    <img src="https://i.pravatar.cc/100">
    <h3>Admin</h3>
  </div>
  <button class="add" onclick="openModal()">âž• Add User</button>
  <button class="logout">ðŸšª Logout</button>
</aside>

<!-- Main -->
<div class="main">

  <!-- Directeur / Sous Directeur -->
  <div class="top-tables">
    <div class="card">
      <h2>Directeurs</h2>
      <table>
        <tr><th>Nom</th><th>Email</th><th>Actions</th></tr>
      </table>
    </div>

    <div class="card">
      <h2>Sous Directeurs</h2>
      <table>
        <tr><th>Nom</th><th>Email</th><th>Actions</th></tr>
      </table>
    </div>
  </div>

  <!-- Departments -->
  <div class="departments">
    <div class="card"><h3>ZSB</h3><table><tr><th>User</th><th>Role</th><th>Actions</th></tr></table></div>
    <div class="card"><h3>R-S</h3><table><tr><th>User</th><th>Role</th><th>Actions</th></tr></table></div>
    <div class="card"><h3>JIS</h3><table><tr><th>User</th><th>Role</th><th>Actions</th></tr></table></div>
    <div class="card"><h3>N-JIS</h3><table><tr><th>User</th><th>Role</th><th>Actions</th></tr></table></div>
  </div>

</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2>Add User</h2>

    <input placeholder="Nom *">
    <input placeholder="Email *">

    <select id="role" onchange="roleChange()">
      <option value="">Select role *</option>
      <option value="directeur">Directeur</option>
      <option value="sous">Sous Directeur</option>
      <option value="supervisor">Supervisor</option>
    </select>

    <!-- Directeur -->
    <button id="addIt" style="display:none">Add It</button>

    <!-- Department -->
    <select id="dept" onchange="deptChange()" style="display:none">
      <option value="">Select Department</option>
      <option value="ZSB">ZSB</option>
      <option value="R-S">R-S</option>
      <option value="JIS">JIS</option>
      <option value="N-JIS">N-JIS</option>
    </select>

    <!-- Parts -->
    <div class="parts" id="parts" style="display:none"></div>

    <input placeholder="Tel">
    <input placeholder="Whatsapp">

    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
const partsByDept = {
  "ZSB": ["INR","COCPIT","BASIS","THS","MM"],
  "R-S": ["LAGER60","LAGER45","LAGER05"]
}

function openModal() { modal.style.display = "flex" }
function closeModal() { modal.style.display = "none" }

function roleChange() {
  addIt.style.display = "none"
  dept.style.display = "none"
  parts.style.display = "none"
  parts.innerHTML = ""

  if (role.value === "directeur") addIt.style.display = "block"
  if (role.value === "sous" || role.value === "supervisor") {
    dept.style.display = "block"
  }
}

function deptChange() {
  parts.innerHTML = ""
  parts.style.display = "none"

  if (role.value === "supervisor" && partsByDept[dept.value]) {
    parts.style.display = "block"
    partsByDept[dept.value].forEach(p => {
      parts.innerHTML += `
        <label>
          <input type="checkbox" value="${p}"> ${p}
        </label>`
    })
  }
}
</script>

</body>
</html>
