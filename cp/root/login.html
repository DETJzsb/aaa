<!DOCTYPE html>
<html>
<head>
  <title>Root Login</title>
  <link rel="stylesheet" href="css/login.css">
</head>
<body>

<div class="login-box">
  <h2>Root Login</h2>

  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">

  <button onclick="login()">Login</button>
  <p id="error"></p>
</div>

<script type="module">
  const {
  data: { session }
} = await supabase.auth.getSession()

if (session) {
  window.location.href = "index.html"
}

  import { supabase } from "./js/supabase.js"

  async function login() {
    const { error } = await supabase.auth.signInWithPassword({
      email: email.value,
      password: password.value
    })

    if (error) {
      document.getElementById("error").innerText = error.message
    } else {
      window.location.href = "index.html"
    }
  }

  window.login = login
</script>

</body>
</html>
